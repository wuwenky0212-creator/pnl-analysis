# 🔧 修复健康检查失败 - 详细步骤

## 🔍 问题分析

健康检查失败，尝试了14次都显示 "service unavailable"

可能的原因：
1. 应用没有正确启动
2. 端口配置问题
3. Railway健康检查路径配置问题

---

## ✅ 已修复

我已经更新了 `railway.json`，添加了健康检查配置。

---

## 🚀 现在需要做的

### 步骤1：查看部署日志（重要！）

在Railway中：
1. **点击 "Deploy Logs" 标签**（在Build Logs旁边）
2. **查看应用启动日志**
3. **告诉我你看到了什么**：
   - 应用是否启动了？
   - 有没有错误信息？
   - 端口是什么？

### 步骤2：提交并推送修改

1. **在GitHub Desktop中**，你会看到 `railway.json` 有更改
2. **输入提交信息**：`配置Railway健康检查路径`
3. **点击 "Commit to main"**
4. **点击 "Push origin"**

### 步骤3：在Railway中配置健康检查

推送后，在Railway中：

1. **点击 `fx-attribution-backend` 服务**
2. **点击 "Settings" 标签**
3. **找到 "Healthcheck" 部分**（如果有）
4. **配置**：
   - **Path**: `/health`
   - **Port**: 留空（使用默认）
   - **Timeout**: 30s

### 步骤4：检查环境变量

1. **在 "Variables" 标签中**
2. **确认 `PORT` 环境变量存在**
3. **如果没有，添加**：
   - 变量名：`PORT`
   - 变量值：`8002`

---

## 🔍 如果还是失败

### 查看详细日志

1. **点击 "Deploy Logs" 标签**
2. **查看最后几行日志**
3. **告诉我你看到了什么**

可能的问题：
- 应用启动失败
- 端口冲突
- 依赖问题

---

## 📋 检查清单

- [ ] 已查看Deploy Logs，确认应用是否启动
- [ ] 已提交railway.json修改
- [ ] 已推送到GitHub
- [ ] 已在Railway中配置健康检查路径
- [ ] 已确认PORT环境变量
- [ ] 等待重新部署
- [ ] 健康检查通过

---

**先查看Deploy Logs，告诉我你看到了什么，然后提交修改！** 🔍


