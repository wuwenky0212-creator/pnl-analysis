# 🚀 最简单部署方案 - 让全世界都能访问

## 🎯 推荐方案：Railway（最简单，推荐⭐⭐⭐⭐⭐）

### 为什么选择Railway？
- ✅ **一键部署**：连接GitHub，自动部署
- ✅ **完全免费**：$5/月免费额度（通常足够）
- ✅ **自动HTTPS**：免费SSL证书
- ✅ **全球访问**：任何人都能访问
- ✅ **自动更新**：Git推送自动部署

---

## 📋 3步完成部署

### 步骤1：准备GitHub仓库（5分钟）

```bash
# 1. 在GitHub创建新仓库
# 访问：https://github.com/new
# 仓库名：损益归因分析

# 2. 在本地项目目录执行
git init
git add .
git commit -m "初始提交"
git branch -M main
git remote add origin https://github.com/你的用户名/损益归因分析.git
git push -u origin main
```

### 步骤2：部署到Railway（5分钟）

1. **访问Railway**
   - 打开：https://railway.app
   - 点击 "Start a New Project"
   - 选择 "Login with GitHub"

2. **部署后端**
   - 点击 "New Project"
   - 选择 "Deploy from GitHub repo"
   - 选择你的仓库
   - Railway会自动检测Dockerfile并开始部署

3. **配置环境变量**
   - 在服务设置中，点击 "Variables"
   - 添加以下变量：
     ```
     PORT=8002
     HOST=0.0.0.0
     DEBUG=False
     DATA_FORMAT=mock
     ```

4. **获取后端URL**
   - 在服务设置中，点击 "Settings"
   - 找到 "Domains"，点击 "Generate Domain"
   - 复制生成的URL，例如：`https://fx-attribution-backend.railway.app`

5. **部署前端**
   - 在Railway项目中，点击 "New"
   - 选择 "Empty Service"
   - 配置：
     - Source: 选择你的GitHub仓库
     - Root Directory: `frontend`
     - 或者使用Nginx配置（见下方）

### 步骤3：配置前端API地址（2分钟）

修改 `frontend/index.html`，在 `<head>` 标签中添加：

```html
<meta name="backend-url" content="https://你的后端URL.railway.app">
```

例如：
```html
<meta name="backend-url" content="https://fx-attribution-backend.railway.app">
```

然后重新推送代码：
```bash
git add frontend/index.html
git commit -m "配置后端API地址"
git push
```

Railway会自动重新部署！

---

## 🎉 完成！

现在访问：
- **前端页面**: https://你的前端URL.railway.app
- **API文档**: https://你的后端URL.railway.app/docs

**任何人都可以通过这个链接访问你的应用了！** 🌍

---

## 🌐 其他推荐平台（备选）

### 方案2：Vercel（前端）+ Railway（后端）

**优点**：Vercel前端CDN速度快

**步骤**：
1. 后端部署到Railway（同上）
2. 前端部署到Vercel：
   - 访问 https://vercel.com
   - 导入GitHub仓库
   - Root Directory: `frontend`
   - 环境变量：`API_URL=https://你的后端URL.railway.app/api`

### 方案3：Render（全栈）

**优点**：前后端都能部署

**步骤**：
1. 访问 https://render.com
2. 使用 `render.yaml` 配置文件一键部署
3. 详细步骤见：`部署到Render指南.md`

---

## 💰 费用说明

### Railway
- **免费额度**: $5/月
- **通常足够个人项目使用**
- **超出后按使用量付费**

### Vercel
- **完全免费**（个人项目）
- **无限制**

### Render
- **免费套餐**（服务会休眠）
- **Starter计划**: $7/月（不休眠）

---

## 🔧 配置自定义域名（可选）

### Railway域名配置
1. 在Railway服务设置中
2. 选择 "Custom Domain"
3. 输入你的域名（如：yourdomain.com）
4. 按照提示配置DNS记录
5. Railway会自动配置SSL证书

### DNS配置示例
```
类型: CNAME
名称: @
值: your-app.railway.app
```

---

## 📝 更新部署

以后每次更新代码：
```bash
git add .
git commit -m "更新内容"
git push
```

Railway会自动检测并重新部署！

---

## ❓ 常见问题

### Q: 免费额度用完了怎么办？
A: 可以升级到付费计划，或者使用其他免费平台（Vercel、Render等）

### Q: 如何查看访问日志？
A: 在Railway控制台选择服务 > Deployments > 查看日志

### Q: 如何重启服务？
A: 在Railway服务设置中点击 "Restart"

### Q: 可以绑定自己的域名吗？
A: 可以！Railway支持自定义域名，并自动配置SSL

---

## 🎯 推荐顺序

1. **首选**：Railway（最简单）
2. **次选**：Vercel + Railway（前端更快）
3. **备选**：Render（全栈免费）

---

**选择Railway，3步完成部署，让全世界都能访问你的应用！** 🚀

